<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  
  <title>è²·å–è¡¨</title>
  <link rel="icon" href="data:,">
  
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">

  <style>
    /* â˜…â˜…â˜… ãƒ‡ã‚¶ã‚¤ãƒ³è¨­å®šã‚¨ãƒªã‚¢ â˜…â˜…â˜… */
    :root {
      --accent: #58BDD7; 
      --accent-hover: #4aaec7;
      --price-color: #ffffff;
      --bg-dark: #121212;
      --card-bg: #1e1e1e;
      --text-main: #ffffff;
      --border: #555555;
      --glow-text: 0 0 8px rgba(88, 189, 215, 0.6);
      --glow-price: 0 0 10px rgba(255, 255, 255, 0.7); 
      --glow-box: 0 0 12px rgba(88, 189, 215, 0.4);
    }

    /* éƒµé€è²·å–ãƒ¢ãƒ¼ãƒ‰ã®ã‚«ãƒ©ãƒ¼ã‚¹ã‚­ãƒ¼ãƒ ï¼ˆè–„ç´«ï¼‰ */
    body.mail-mode {
      --accent: #b472ff; 
      --accent-hover: #9e5be0;
      --glow-text: 0 0 8px rgba(180, 114, 255, 0.6);
      --glow-price: 0 0 10px rgba(255, 255, 255, 0.7); 
      --glow-box: 0 0 12px rgba(180, 114, 255, 0.4);
    }

    body { 
      font-family: "Helvetica Neue", Arial, sans-serif; 
      margin: 0; padding: 0; 
      color: var(--text-main);
      background-color: var(--bg-dark);
      /* èƒŒæ™¯ç”»åƒã®è¨­å®š */
      background-image: url('./bg-gray.jpg.png');
      background-size: cover;
      background-position: center;
      background-attachment: fixed;
      display: flex;
      flex-direction: column;
      min-height: 100vh;
      padding-bottom: 80px; /* ã‚«ãƒ¼ãƒˆãƒãƒ¼ç”¨ã®ä½™ç™½ */
      transition: all 0.5s ease;
    }
    
    body::before {
      content: "";
      position: fixed; top: 0; left: 0; width: 100%; height: 100%;
      background: rgba(0, 0, 0, 0.7); 
      z-index: -1;
    }

    * { box-sizing: border-box; }

    /* ãƒ˜ãƒƒãƒ€ãƒ¼ */
    header { 
      background: #111; 
      border-bottom: 2px solid var(--accent); 
      padding: 10px 15px; 
      position: relative;
      z-index: 10;
      display: flex; 
      justify-content: space-between; 
      align-items: center; 
      height: 60px;
      transition: border-bottom 0.5s ease;
    }
    
    .header-left { display: flex; align-items: center; gap: 15px; }
    .hamburger {
      width: 24px; height: 18px; cursor: pointer; z-index: 100;
      display: flex; flex-direction: column; justify-content: space-between;
    }
    .hamburger span {
      display: block; height: 2px; width: 100%; background: var(--text-main); border-radius: 2px; transition: 0.3s;
    }
    .title-text {
      font-size: 20px; font-weight: 800; color: var(--accent); text-shadow: var(--glow-text);
      font-style: italic; letter-spacing: 1px; white-space: nowrap; transition: color 0.5s;
    }

    /* å³å´ã‚¨ãƒªã‚¢ï¼ˆãƒ­ã‚´ï¼‹ã‚«ãƒ¼ãƒˆãƒœã‚¿ãƒ³ï¼‰ */
    .header-right { display: flex; align-items: center; gap: 15px; }
    .logo-img { height: 40px; width: auto; object-fit: contain; filter: none; }
    
    /* ãƒ˜ãƒƒãƒ€ãƒ¼å†…ã‚«ãƒ¼ãƒˆãƒœã‚¿ãƒ³ï¼ˆéƒµé€ãƒ¢ãƒ¼ãƒ‰ã®ã¿ï¼‰ */
    .header-cart-btn {
      display: none; position: relative; font-size: 20px; color: #fff; cursor: pointer;
    }
    body.mail-mode .header-cart-btn { display: block; }
    .cart-badge {
      position: absolute; top: -8px; right: -10px; 
      background: #ff5252; color: #fff; font-size: 10px; font-weight: bold;
      width: 18px; height: 18px; border-radius: 50%; 
      display: flex; align-items: center; justify-content: center;
      border: 1px solid #fff;
    }

    /* æ—¥ä»˜è¡¨ç¤º */
    #date-display {
      position: absolute; top: 100%; right: 10px; margin-top: 5px;
      font-size: 10px; color: #aaa; font-weight: bold;
      transition: all 0.5s;
    }

    /* ãƒ‰ãƒ­ãƒ¯ãƒ¼ãƒ¡ãƒ‹ãƒ¥ãƒ¼ */
    .drawer {
      position: fixed; top: 0; left: -280px; width: 260px; height: 100%;
      background: #1a1a1a; z-index: 99999; transition: left 0.3s ease;
      box-shadow: 2px 0 15px rgba(0,0,0,0.8); display: flex; flex-direction: column;
    }
    .drawer.open { left: 0; }
    .drawer-header {
      padding: 20px; font-size: 18px; font-weight: bold; color: var(--accent);
      border-bottom: 1px solid #333; background: #111; text-shadow: var(--glow-text);
    }
    .drawer-list { list-style: none; padding: 0; margin: 0; overflow-y: auto; }
    .drawer-item {
      padding: 15px 20px; border-bottom: 1px solid #2a2a2a; cursor: pointer; color: #eee; font-weight: bold; font-size:15px;
    }
    .drawer-item:hover { background: #2a2a2a; color: var(--accent); }
    .drawer-overlay {
      position: fixed; top: 0; left: 0; width: 100%; height: 100%;
      background: rgba(0,0,0,0.7); backdrop-filter: blur(2px); z-index: 99998;
      display: none; opacity: 0; transition: opacity 0.3s ease;
    }
    .drawer-overlay.open { display: block; opacity: 1; }

    /* â˜…â˜…â˜… ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼ãƒãƒŠãƒ¼ â˜…â˜…â˜… */
    .slider-container {
      width: 100%; max-width: 1000px; margin: 0 auto;
      position: relative; overflow: hidden; display: none; background: #000;
      border-bottom: 1px solid #333;
    }
    body.mail-mode .slider-container { display: block; }
    
    .slider-wrapper {
      display: flex; transition: transform 0.5s ease-in-out;
    }
    .slider-slide {
      min-width: 100%; box-sizing: border-box;
    }
    .slider-slide img {
      width: 100%; height: auto; display: block; max-height: 250px; object-fit: cover;
    }
    /* ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ãƒ¼ */
    .slider-dots {
      position: absolute; bottom: 10px; left: 50%; transform: translateX(-50%);
      display: flex; gap: 8px;
    }
    .slider-dot {
      width: 8px; height: 8px; background: rgba(255,255,255,0.5); border-radius: 50%; cursor: pointer;
    }
    .slider-dot.active { background: #fff; transform: scale(1.2); box-shadow: 0 0 5px #fff; }

    /* ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ */
    .sticky-container {
      position: sticky; top: 0; z-index: 9990;
      background: rgba(18, 18, 18, 0.95); backdrop-filter: blur(5px);
      border-bottom: 1px solid #444; box-shadow: 0 4px 12px rgba(0,0,0,0.5);
    }
    .nav-scroll { overflow-x: auto; white-space: nowrap; padding: 0 10px; border-bottom: 1px solid #333; }
    .nav-tabs { display: flex; gap: 10px; max-width: 1000px; margin: 0 auto; padding: 0; list-style: none; align-items: center; }
    .nav-item { cursor: pointer; padding: 14px 12px; font-weight: bold; color: #888; border-bottom: 3px solid transparent; transition: 0.3s; font-size: 14px; }
    .nav-item:hover { color: #fff; text-shadow: 0 0 5px #fff; }
    .nav-item.active { color: var(--accent); border-bottom-color: var(--accent); text-shadow: var(--glow-text); }

    .filters { 
      max-width: 1000px; margin: 0 auto; padding: 10px 12px; 
      display: flex; gap: 8px; flex-wrap: wrap; align-items: center;
    }
    .search-box { flex: 1; min-width: 120px; position: relative; }
    .search-box input { 
      width: 100%; padding: 8px 8px 8px 30px; border: 1px solid #555; border-radius: 4px; 
      outline: none; font-size: 13px; background: rgba(30, 30, 30, 0.8); color: #fff;
      transition: border-color 0.3s, box-shadow 0.3s;
    }
    .search-box input:focus { border-color: var(--accent); box-shadow: 0 0 5px var(--accent); }
    .search-icon { position: absolute; left: 8px; top: 9px; color: #aaa; font-size: 12px; }
    
    select, button { 
      padding: 8px; border: 1px solid #555; border-radius: 4px; 
      background: rgba(30, 30, 30, 0.8); color: #fff; cursor: pointer; font-size: 12px; 
    }
    button { 
      background: var(--accent); border: none; font-weight: bold; transition: 0.3s; box-shadow: var(--glow-text); 
    }
    button:hover { opacity: 0.8; }

    /* ã€Œè²·å–ã®æµã‚Œã€ãƒœã‚¿ãƒ³ï¼ˆéƒµé€ãƒ¢ãƒ¼ãƒ‰ç”¨ï¼‰ */
    .flow-btn {
      background: transparent; border: 1px solid var(--accent); color: var(--accent);
      display: none; align-items: center; gap: 5px; box-shadow: none;
    }
    .flow-btn:hover { background: rgba(180, 114, 255, 0.1); }
    body.mail-mode .flow-btn { display: flex; }
    body.mail-mode #showSoldOutLabel { display: none; } /* éƒµé€ãƒ¢ãƒ¼ãƒ‰ã§ã¯soldoutãƒ•ã‚£ãƒ«ã‚¿éè¡¨ç¤º */

    /* ã‚«ãƒ¼ãƒ‰ãƒªã‚¹ãƒˆ */
    .container { max-width: 1000px; margin: 20px auto 0; padding: 0 12px 20px; flex: 1; width: 100%; }
    .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(150px, 1fr)); gap: 12px; }
    
    .card { 
      background: var(--card-bg); border-radius: 8px; overflow: hidden; 
      border: 1px solid var(--border); box-shadow: 0 4px 6px rgba(0,0,0,0.6);
      display: flex; flex-direction: column; position: relative; transition: all 0.2s ease;
    }
    /* åº—é ­ãƒ¢ãƒ¼ãƒ‰ã®ã¿hoverã§æµ®ã */
    body:not(.mail-mode) .card:hover { transform: translateY(-4px); border-color: var(--accent); box-shadow: var(--glow-box); }

    .card.sold-out { border-color: #333; box-shadow: none; }
    .card.sold-out:hover { transform: none; border-color: #333; }

    .card-img { width: 100%; aspect-ratio: 3/4; background: #000; object-fit: contain; border-bottom: 1px solid #333; }
    .no-img { display: flex; align-items: center; justify-content: center; color: #555; font-size: 10px; background: #222; }

    .card-body { padding: 8px; flex: 1; display: flex; flex-direction: column; position: relative; }
    
    /* ã‚«ãƒ¼ãƒ‰ãƒ˜ãƒƒãƒ€ãƒ¼ï¼ˆã‚¿ã‚¤ãƒ—ã¨æ®‹ã‚Šæšæ•°ã‚’å·¦å³ã«é…ç½®ï¼‰ */
    .card-header-row {
      display: flex; justify-content: space-between; align-items: center; margin-bottom: 4px;
    }
    .type-label { font-size: 10px; color: var(--accent); font-weight: 900; text-shadow: var(--glow-text); }
    .limit-badge { 
      font-size: 10px; color: #fff; background: #444; padding: 2px 6px; border-radius: 4px; font-weight: bold;
    }
    
    .card-title { 
      font-size: 12px; font-weight: bold; line-height: 1.4; margin-bottom: 6px; color: #fff; 
      display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; height: 34px; 
    }
    
    .card-tags { position: absolute; top: 4px; right: 4px; display: flex; flex-direction: column; gap: 2px; align-items: flex-end; }
    .badge { 
      display: inline-block; padding: 2px 6px; border-radius: 4px; font-size: 10px; font-weight: bold;
      background: #333; color: #fff; border: 1px solid #555;
    }
    .badge-sotai { background: #555; color: #eee; }

    .card-footer { margin-top: auto; border-top: 1px solid #444; padding-top: 6px; }
    .price-row { display: flex; align-items: baseline; justify-content: space-between; gap: 4px; }
    .price-label { font-size: 9px; color: #aaa; }
    .price-value { color: var(--price-color); font-size: 16px; font-weight: 800; text-shadow: var(--glow-price); }

    /* ã‚«ãƒ¼ãƒˆUI */
    .cart-actions {
      display: none; margin-top: 8px; gap: 4px; align-items: center;
    }
    body.mail-mode .cart-actions { display: flex; }
    
    .qty-group {
      display: flex; align-items: center; border: 1px solid #555; border-radius: 4px; background: #fff; height: 28px; overflow: hidden;
    }
    .qty-btn {
      width: 24px; height: 100%; background: #eee; border: none; color: #333; font-weight: bold; padding: 0; 
      display:flex; align-items:center; justify-content:center;
    }
    .qty-input {
      width: 24px; height: 100%; border: none; text-align: center; font-size: 12px; color: #333; font-weight: bold; padding: 0; background: #fff;
    }
    .add-btn {
      flex: 1; height: 28px; font-size: 11px; background: var(--accent); color: #fff; border-radius: 4px; border:none; cursor: pointer;
    }
    .add-btn:active { transform: scale(0.95); }

    .sold-out-overlay {
      position: absolute; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.6); z-index:50; 
      display:flex; align-items:center; justify-content:center;
    }
    .sold-out-badge {
      background: var(--accent); color: #fff; font-weight: 900; font-size: 12px; padding: 6px 12px; border-radius: 4px; border: 2px solid #fff;
    }

    /* ã‚«ãƒ¼ãƒˆå›ºå®šãƒãƒ¼ */
    .cart-bar {
      position: fixed; bottom: 0; left: 0; width: 100%;
      background: #1a1a1a; border-top: 2px solid var(--accent);
      padding: 15px; z-index: 20000;
      display: flex; justify-content: space-between; align-items: center;
      transform: translateY(100%); transition: transform 0.3s ease;
      box-shadow: 0 -4px 20px rgba(0,0,0,0.5);
    }
    .cart-bar.visible { transform: translateY(0); }
    .cart-total-info { font-size: 14px; font-weight: bold; color: #fff; }
    .cart-total-price { font-size: 20px; color: var(--accent); margin-right: 10px; font-weight: bold; text-shadow: var(--glow-text); }
    .check-cart-btn {
      padding: 10px 20px; background: var(--accent); color: #fff; font-weight: bold; border-radius: 4px; border:none; cursor: pointer;
    }

    /* ã‚«ãƒ¼ãƒˆç¢ºèªç”»é¢ */
    #cartView {
      display: none; padding: 20px; max-width: 800px; margin: 0 auto; color: #fff;
    }
    .cart-header { font-size: 20px; font-weight: bold; border-bottom: 1px solid #444; padding-bottom: 10px; margin-bottom: 20px; }
    .cart-item {
      display: flex; gap: 15px; padding: 15px 0; border-bottom: 1px solid #333; align-items: flex-start;
    }
    .cart-item-img { width: 60px; height: 80px; background: #000; object-fit: contain; border: 1px solid #444; }
    .cart-item-info { flex: 1; }
    .cart-item-title { font-size: 14px; font-weight: bold; margin-bottom: 5px; }
    .cart-item-meta { font-size: 12px; color: #aaa; margin-bottom: 5px; }
    .cart-item-price { font-size: 16px; color: var(--accent); font-weight: bold; }
    .cart-item-actions { display: flex; align-items: center; gap: 10px; margin-top: 10px; }
    .delete-btn { background: #ff5252; color: #fff; padding: 5px 10px; font-size: 11px; border-radius: 4px; border: none; cursor: pointer; }

    /* æƒ…å ±ãƒ“ãƒ¥ãƒ¼ */
    #infoView { display: none; padding: 20px; max-width: 800px; margin: 0 auto; color: #ddd; line-height: 1.8; font-size: 14px; text-align: left; }
    #infoView h2 { color: var(--accent); border-bottom: 1px solid var(--accent); padding-bottom: 10px; margin-top: 30px; }
    #infoView h3 { color: #fff; margin-top: 25px; font-size: 16px; }
    .flow-step { background: #252525; padding: 15px; border-radius: 8px; margin-bottom: 20px; border-left: 4px solid var(--accent); }
    .flow-title { font-size: 16px; font-weight: bold; color: var(--accent); margin-bottom: 10px; }
    .note-box { background: rgba(255, 50, 50, 0.1); border: 1px solid #ff5252; padding: 15px; border-radius: 8px; margin-top: 30px; }
    .note-title { color: #ff5252; font-weight: bold; margin-bottom: 10px; font-size: 16px; }
    .faq-q { color: var(--accent); font-weight: bold; }
    .faq-a { margin-left: 10px; margin-bottom: 20px; }

    /* ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ»ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚° */
    .closed-message-container {
      grid-column: 1 / -1; text-align: center; padding: 60px 20px; margin-top: 40px;
      border: 3px solid var(--accent); border-radius: 12px;
      background: rgba(88, 189, 215, 0.1); box-shadow: var(--glow-box); color: #ffffff;
    }
    .closed-title { font-size: 26px; font-weight: 900; color: var(--accent); margin-bottom: 20px; text-shadow: var(--glow-text); }
    .closed-text { font-size: 16px; line-height: 2.0; font-weight: bold; }
    .loading { text-align: center; padding: 40px; color: #aaa; grid-column: 1 / -1; }
    .error { background: #330000; color: #ff8a80; padding: 15px; border: 1px solid #ff5252; margin-bottom: 20px; display: none; }

    /* ãƒ¢ãƒ¼ãƒ€ãƒ« */
    .modal-overlay {
      display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
      background: rgba(0, 0, 0, 0.85); z-index: 10000; justify-content: center; align-items: center; 
      padding: 15px; backdrop-filter: blur(4px);
    }
    .modal-overlay.active { display: flex; }
    .modal-content {
      background: #1e1e1e; border: 2px solid var(--accent); border-radius: 12px;
      width: 100%; max-width: 400px; max-height: 90vh; overflow-y: auto;
      position: relative; padding: 20px; box-shadow: 0 0 30px rgba(88, 189, 215, 0.2);
    }
    body.mail-mode .modal-content { box-shadow: 0 0 30px rgba(180, 114, 255, 0.2); }
    .close-modal { position: absolute; top: 10px; right: 15px; font-size: 32px; color: #888; cursor: pointer; }
    .modal-img-wrapper { text-align: center; margin-bottom: 15px; background:#000; padding:10px; border-radius:8px;}
    .modal-img { max-height: 300px; max-width: 100%; object-fit: contain; }
    .modal-title { font-size: 18px; font-weight: bold; color: #fff; margin-bottom: 15px; border-bottom: 1px solid #444; padding-bottom: 15px; }
    .modal-row { display: flex; justify-content: space-between; align-items: baseline; margin-top:10px;}
    .modal-price { font-size: 32px; color: #ffffff; font-weight: 900; text-shadow: var(--glow-price); }
    .modal-label { font-size: 12px; color: #aaa; }

    footer { background: #0f0f0f; border-top: 1px solid #333; padding: 20px; text-align: center; margin-top: auto; position: relative; }
    .footer-links { display: flex; justify-content: center; gap: 20px; margin-bottom: 10px; }
    .footer-link { color: #888; font-size: 12px; text-decoration: none; cursor: pointer; }
    .footer-version { position: absolute; bottom: 5px; left: 10px; font-size: 9px; color: #444; }

    @media (max-width: 600px) {
      .grid { grid-template-columns: repeat(3, 1fr); gap: 8px; } /* ã‚¹ãƒãƒ›3åˆ— */
      .card-title { font-size: 10px; height: 28px; }
      .price-value { font-size: 14px; }
      .cart-actions { flex-direction: column; align-items: stretch; }
      .qty-group { margin-bottom: 4px; }
    }
  </style>
</head>
<body>

  <div id="drawerOverlay" class="drawer-overlay"></div>
  <div id="drawerMenu" class="drawer">
    <div class="drawer-header">MENU</div>
    <ul class="drawer-list">
      <li class="drawer-item" id="menuStore">ğŸ¬ åº—é ­è²·å–è¡¨</li>
      <li class="drawer-item" id="menuMail">ğŸ“¦ éƒµé€è²·å–è¡¨</li>
      <li class="drawer-item" onclick="openInfo('privacy')">ğŸ“ ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒãƒªã‚·ãƒ¼</li>
      <li class="drawer-item" onclick="openInfo('terms')">ğŸ“œ åˆ©ç”¨è¦ç´„</li>
    </ul>
  </div>

  <div id="mainView">
    <header>
      <div class="header-left">
        <div class="hamburger" id="hamburgerBtn"><span></span><span></span><span></span></div>
        <div class="title-text" id="mainTitle">åº—é ­è²·å–è¡¨</div>
      </div>
      <div class="header-right">
        <div class="header-cart-btn" onclick="openCart()">
          <i class="fa-solid fa-cart-shopping"></i>
          <span class="cart-badge" id="headerCartCount">0</span>
        </div>
        <img src="./logo.png.png.png.png" alt="ãƒ­ã‚´" class="logo-img" />
      </div>
    </header>

    <div id="date-display"></div>

    <div class="slider-container" id="bannerSlider">
      <div class="slider-wrapper" id="sliderWrapper"></div>
      <div class="slider-dots" id="sliderDots"></div>
    </div>

    <div class="sticky-container">
      <div class="nav-scroll">
        <ul class="nav-tabs" id="categoryTabs">
          <li class="nav-item active" data-cat="ãƒã‚±ãƒ¢ãƒ³">ãƒã‚±ãƒ¢ãƒ³</li>
          <li class="nav-item" data-cat="ãƒ¯ãƒ³ãƒ”ãƒ¼ã‚¹">ãƒ¯ãƒ³ãƒ”ãƒ¼ã‚¹</li>
          <li class="nav-item" data-cat="ãƒ‰ãƒ©ã‚´ãƒ³ãƒœãƒ¼ãƒ«">ãƒ‰ãƒ©ã‚´ãƒ³ãƒœãƒ¼ãƒ«</li>
          <li class="nav-item" data-cat="éŠæˆ¯ç‹">éŠæˆ¯ç‹</li>
          <li class="nav-item" data-cat="ãƒ´ã‚¡ã‚¤ã‚¹">ãƒ´ã‚¡ã‚¤ã‚¹</li>
          <li class="nav-item" data-cat="ãã®ä»–">ãã®ä»–</li>
        </ul>
      </div>
      <div class="filters">
        <div class="search-box"><span class="search-icon">ğŸ”</span><input id="q" placeholder="æ¤œç´¢" /></div>
        <select id="sort">
          <option value="price_desc">é«˜ã„é †</option>
          <option value="price_asc">å®‰ã„é †</option>
          <option value="type_psa10">PSA10</option>
          <option value="type_mikaifu">æœªé–‹å°</option> 
          <option value="type_sotai">ç´ ä½“</option>
          <option value="type_box">BOX</option>
        </select>
        <label id="showSoldOutLabel" style="display:flex;align-items:center;font-size:12px;color:#fff;margin-left:auto;">
          <input type="checkbox" id="showSoldOut" checked> çµ‚äº†ã‚‚è¡¨ç¤º
        </label>
        <button id="flowBtn" class="flow-btn" onclick="openInfo('flow')"><i class="fa-solid fa-book-open"></i> è²·å–ã®æµã‚Œ</button>
        <button id="reload">æ›´æ–°</button>
      </div>
    </div>

    <div class="container">
      <div id="err" class="error"></div>
      <div id="grid" class="grid"></div>
      <div id="paginationCtrl" class="pagination" style="display:none;">
        <button id="prevBtn" class="page-btn">å‰ã¸</button><span id="pageInfo" class="page-info">1/1</span><button id="nextBtn" class="page-btn">æ¬¡ã¸</button>
      </div>
    </div>
  </div>

  <div id="cartView">
    <div class="back-btn-container" style="text-align:left;">
      <button onclick="closeCart()" style="padding:5px 15px;">ï¼œ æˆ»ã‚‹</button>
    </div>
    <div class="cart-header">ã‚«ãƒ¼ãƒˆã‚’ç·¨é›†</div>
    <div id="cartItemsList"></div>
    <div style="text-align:right; margin-top:20px; font-size:18px; font-weight:bold;">
      åˆè¨ˆ <span style="color:var(--accent); font-size:24px;" id="cartViewTotal">Â¥0</span>
    </div>
    </div>

  <div id="cartBar" class="cart-bar">
    <div class="cart-total-info">
      åˆè¨ˆ <span class="cart-total-price" id="cartTotalPrice">Â¥0</span>
      <span id="cartTotalCount">(0ç‚¹)</span>
    </div>
    <button class="check-cart-btn" onclick="openCart()">ã‚«ãƒ¼ãƒˆã‚’ç¢ºèª</button>
  </div>

  <div id="infoView">
    <div class="back-btn-container"><button onclick="closeInfo()" style="padding:10px 30px;">ä¸€è¦§ã«æˆ»ã‚‹</button></div>
    <div id="infoContent"></div>
    <div class="back-btn-container" style="margin-top:40px;"><button onclick="closeInfo()" style="padding:10px 30px;">ä¸€è¦§ã«æˆ»ã‚‹</button></div>
  </div>

  <div id="modal" class="modal-overlay">
    <div class="modal-content">
      <span class="close-modal" id="closeModalBtn">&times;</span>
      <div class="modal-tags" id="modalTags"></div>
      <div class="modal-img-wrapper"><img id="modalImg" src="" class="modal-img" /></div>
      <div class="modal-title" id="modalTitle"></div>
      <div class="modal-row">
        <span class="modal-label">è²·å–ä¾¡æ ¼</span><span class="modal-price" id="modalPrice"></span>
      </div>
      <div style="text-align:right; margin-top:5px;"><span class="limit" id="modalLimit" style="font-size:14px; padding:4px 10px;"></span></div>
    </div>
  </div>

  <footer>
    <div class="footer-links">
      <a class="footer-link" onclick="openInfo('privacy')">ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒãƒªã‚·ãƒ¼</a><span style="color:#333">|</span><a class="footer-link" onclick="openInfo('terms')">åˆ©ç”¨è¦ç´„</a>
    </div>
    <div class="copyright">Â© 2026 ãƒˆãƒ¬ã‚«ãƒ•ã‚©ãƒ¼ã‚¹</div>
    <div class="footer-version">v8.1</div>
  </footer>

  <script>
    // â˜… GAS URLï¼ˆå¿…ãšã”è‡ªèº«ã®ã‚‚ã®ã«æ›¸ãæ›ãˆã¦ãã ã•ã„ï¼‰
    const API = "https://script.google.com/macros/s/AKfycbw08oFxfH6FsxcJ77mgNLeticvOFaq2rknNBK3emZgwmhsM5-sB_ltBhbuKamoXHkV8/exec";
    
    // â˜… è¨­å®š: ãƒãƒŠãƒ¼ç”»åƒURLï¼ˆæœ€å¤§5ã¤ã¾ã§ï¼‰
    const BANNER_IMAGES = [
      "https://placehold.jp/3d4070/ffffff/1000x250.png?text=éƒµé€è²·å–ãƒãƒŠãƒ¼1",
      "https://placehold.jp/703d40/ffffff/1000x250.png?text=éƒµé€è²·å–ãƒãƒŠãƒ¼2"
    ];

    let ALL_DATA = {}, CURRENT_ITEMS = [], CUR_PAGE = 1, CART = {};
    const ITEMS_per_PAGE = 60;
    const urlParams = new URLSearchParams(window.location.search);
    let currentCategory = urlParams.get('cat') || "ãƒã‚±ãƒ¢ãƒ³";
    let isMailMode = urlParams.get('mode') === 'mail';

    const el = (id) => document.getElementById(id);
    const yen = (n) => "Â¥" + Number(n).toLocaleString();

    function updateDate(d) {
      if(!d) d = new Date();
      const m = (d.getMinutes()<30?"00":"30"); 
      el("date-display").textContent = `${d.getFullYear()}/${d.getMonth()+1}/${d.getDate()} ${d.getHours()}:${String(d.getMinutes()).padStart(2,'0')} æ›´æ–°`;
    }
    updateDate();

    function updateModeUI() {
      if(isMailMode) {
        document.body.classList.add('mail-mode');
        el("mainTitle").textContent = "éƒµé€è²·å–è¡¨";
        initSlider(); renderCartBar();
      } else {
        document.body.classList.remove('mail-mode');
        el("mainTitle").textContent = "åº—é ­è²·å–è¡¨";
        el("cartBar").classList.remove("visible");
      }
    }

    // ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼
    function initSlider() {
      if(BANNER_IMAGES.length === 0) { el("bannerSlider").style.display='none'; return; }
      el("sliderWrapper").innerHTML = BANNER_IMAGES.map(s=>`<div class="slider-slide"><img src="${s}"></div>`).join("");
      el("sliderDots").innerHTML = BANNER_IMAGES.map((_,i)=>`<div class="slider-dot ${i===0?'active':''}" onclick="moveSlide(${i})"></div>`).join("");
    }
    let slideIdx = 0;
    function moveSlide(i) {
      slideIdx = i;
      el("sliderWrapper").style.transform = `translateX(-${i*100}%)`;
      document.querySelectorAll(".slider-dot").forEach((d,n)=>d.classList.toggle("active",n===i));
    }
    setInterval(() => { if(isMailMode) moveSlide((slideIdx+1)%BANNER_IMAGES.length); }, 4000);

    // ãƒ‡ãƒ¼ã‚¿å–å¾—
    async function loadData() {
      const sheetName = isMailMode ? "éƒµé€"+currentCategory : currentCategory;
      if(ALL_DATA[sheetName]) { render(); return; }
      el("grid").innerHTML = '<div style="grid-column:1/-1;text-align:center;padding:40px;color:#aaa;">èª­ã¿è¾¼ã¿ä¸­...</div>';
      try {
        const res = await fetch(`${API}?category=${sheetName}&t=${Date.now()}`);
        const data = await res.json();
        if(data.error) throw new Error(data.error);
        ALL_DATA[sheetName] = data;
        updateDate();
        render();
      } catch(e) {
        el("grid").innerHTML = `<div style="grid-column:1/-1;color:red;text-align:center;">ã‚¨ãƒ©ãƒ¼: ${e.message}</div>`;
      }
    }

    function render() {
      const data = ALL_DATA[isMailMode ? "éƒµé€"+currentCategory : currentCategory];
      if(!data || !data.items) return;
      
      let items = data.items.filter(x => {
        const q = el("q").value.toLowerCase();
        return !q || (x.name+x.series).toLowerCase().includes(q);
      });

      if(!isMailMode && !el("showSoldOut").checked) items = items.filter(x => x.remaining > 0);

      const sort = el("sort").value;
      const typePrio = {"PSA10":1,"æœªé–‹å°":2,"ç´ ä½“":3,"BOX":4};
      items.sort((a,b) => {
        const pa = typePrio[a.type]||99, pb = typePrio[b.type]||99;
        if(pa!==pb) return pa-pb;
        return sort==="price_asc" ? a.price-b.price : b.price-a.price;
      });

      CURRENT_ITEMS = items;
      CUR_PAGE = 1;
      renderPage();
    }

    function renderPage() {
      const start = (CUR_PAGE-1)*ITEMS_per_PAGE;
      const pageItems = CURRENT_ITEMS.slice(start, start+ITEMS_per_PAGE);
      
      el("grid").innerHTML = pageItems.map((item, i) => {
        const idx = start + i;
        const isSold = item.remaining <= 0;
        const img = item.imageUrl ? `<img src="${item.imageUrl}" class="card-img" loading="lazy">` : `<div class="card-img no-img">No Image</div>`;
        const badge = (item.type==="ç´ ä½“" && item.grade) ? `<span class="badge-sotai">${item.grade}</span>` : "";
        
        let actions = "";
        if(isMailMode) {
          if(isSold) actions = `<div style="text-align:center;font-size:10px;color:#888;margin-top:5px;">è²·å–çµ‚äº†</div>`;
          else {
            const key = item.id || `temp-${idx}`; 
            actions = `
              <div class="cart-actions">
                <div class="qty-group">
                  <button class="qty-btn" onclick="event.stopPropagation();chQty('${key}', -1)">-</button>
                  <input class="qty-input" id="qty-${key}" value="1" readonly onclick="event.stopPropagation()">
                  <button class="qty-btn" onclick="event.stopPropagation();chQty('${key}', 1, ${item.remaining})">+</button>
                </div>
                <button class="add-btn" onclick="event.stopPropagation();addCart('${key}', ${idx})">è¿½åŠ </button>
              </div>`;
          }
        }

        let overlay = (!isMailMode && isSold) ? `<div class="sold-out-overlay"><div class="sold-out-badge">è²·å–çµ‚äº†</div></div>` : "";

        return `
          <div class="card ${isSold?'sold-out':''}" data-index="${idx}">
            ${overlay}
            <div style="${isSold?'opacity:0.6':''}">
              ${img}
              <div class="card-tags">${badge}</div>
              <div class="card-body">
                <div class="card-header-row">
                  <span class="type-label">ã€${item.type||"PSA10"}ã€‘</span>
                  <span class="limit-badge">æ®‹:${item.remaining}</span>
                </div>
                <div class="card-title">${item.name}</div>
                <div class="card-footer">
                  <div class="price-row">
                    <span class="price-label">è²·å–ä¾¡æ ¼</span>
                    <span class="price-value">${yen(item.price)}</span>
                  </div>
                  ${actions}
                </div>
              </div>
            </div>
          </div>`;
      }).join("");

      el("paginationCtrl").style.display = CURRENT_ITEMS.length > ITEMS_per_PAGE ? "flex" : "none";
      el("pageInfo").innerText = `${CUR_PAGE} / ${Math.ceil(CURRENT_ITEMS.length/ITEMS_per_PAGE)}`;
    }

    function chQty(key, d, max) {
      const inp = el(`qty-${key}`);
      let v = parseInt(inp.value) + d;
      if(v<1) v=1; if(max && v>max) v=max;
      inp.value = v;
    }

    function addCart(key, idx) {
      const item = CURRENT_ITEMS[idx];
      const qty = parseInt(el(`qty-${key}`).value);
      if(!CART[key]) CART[key] = { item: item, qty: 0 };
      if(CART[key].qty + qty > item.remaining) { alert("åœ¨åº«æ•°ã‚’è¶…ãˆã¦ã„ã¾ã™"); return; }
      CART[key].qty += qty;
      renderCartBar();
    }

    function renderCartBar() {
      const keys = Object.keys(CART);
      if(keys.length===0) { 
        el("cartBar").classList.remove("visible"); 
        el("headerCartCount").style.display='none';
        return; 
      }
      let count=0, total=0;
      keys.forEach(k => {
        count += CART[k].qty;
        total += CART[k].item.price * CART[k].qty;
      });
      el("cartTotalPrice").innerText = yen(total);
      el("cartTotalCount").innerText = `(${count}ç‚¹)`;
      el("cartBar").classList.add("visible");
      el("headerCartCount").innerText = count;
      el("headerCartCount").style.display = 'flex';
    }

    function openCart() {
      el("mainView").style.display = "none";
      el("cartBar").classList.remove("visible");
      el("cartView").style.display = "block";
      window.scrollTo(0,0);

      const list = el("cartItemsList");
      const keys = Object.keys(CART);
      if(keys.length===0) {
        list.innerHTML = "<p style='text-align:center;color:#aaa'>ã‚«ãƒ¼ãƒˆã¯ç©ºã§ã™</p>";
        el("cartViewTotal").innerText = "Â¥0";
        return;
      }

      let total = 0;
      list.innerHTML = keys.map(k => {
        const c = CART[k];
        total += c.item.price * c.qty;
        const img = c.item.imageUrl ? `<img src="${c.item.imageUrl}" class="cart-item-img">` : `<div class="cart-item-img"></div>`;
        return `
          <div class="cart-item">
            ${img}
            <div class="cart-item-info">
              <div class="cart-item-title">${c.item.name}</div>
              <div class="cart-item-meta">ã€${c.item.type}ã€‘ å˜ä¾¡:${yen(c.item.price)}</div>
              <div class="cart-item-price">å°è¨ˆ: ${yen(c.item.price * c.qty)}</div>
              <div class="cart-item-actions">
                <div class="qty-group">
                  <button class="qty-btn" onclick="updateCart('${k}', -1)">-</button>
                  <input class="qty-input" value="${c.qty}" readonly>
                  <button class="qty-btn" onclick="updateCart('${k}', 1, ${c.item.remaining})">+</button>
                </div>
                <button class="delete-btn" onclick="removeCart('${k}')">å‰Šé™¤</button>
              </div>
            </div>
          </div>`;
      }).join("");
      el("cartViewTotal").innerText = yen(total);
    }

    function updateCart(key, d, max) {
      CART[key].qty += d;
      if(CART[key].qty < 1) CART[key].qty = 1;
      if(max && CART[key].qty > max) CART[key].qty = max;
      openCart(); renderCartBar();
    }
    function removeCart(key) { delete CART[key]; openCart(); renderCartBar(); }
    function closeCart() { el("cartView").style.display = "none"; el("mainView").style.display = "block"; renderCartBar(); }

    const drawer = el("drawerMenu"); const overlay = el("drawerOverlay");
    function toggleDrawer() { drawer.classList.toggle("open"); overlay.classList.toggle("open"); }
    el("hamburgerBtn").onclick = toggleDrawer; overlay.onclick = toggleDrawer;

    el("menuStore").onclick = () => { isMailMode=false; switchMode(); toggleDrawer(); };
    el("menuMail").onclick = () => { isMailMode=true; switchMode(); toggleDrawer(); };

    function switchMode() {
      const url = new URL(location);
      url.searchParams.set("cat", currentCategory);
      if(isMailMode) url.searchParams.set("mode","mail"); else url.searchParams.delete("mode");
      history.pushState({},"",url);
      updateModeUI(); loadData();
    }

    document.querySelectorAll(".nav-item").forEach(t => {
      t.onclick = (e) => {
        document.querySelectorAll(".nav-item").forEach(x=>x.classList.remove("active"));
        e.target.classList.add("active");
        currentCategory = e.target.dataset.cat;
        switchMode();
      };
    });

    el("sort").onchange = render; el("showSoldOut").onchange = render;
    el("q").oninput = () => setTimeout(render, 300);
    el("reload").onclick = () => { ALL_DATA={}; loadData(); };
    
    // â˜…â˜…â˜… è¦ç´„ãƒ»æµã‚Œã‚³ãƒ³ãƒ†ãƒ³ãƒ„ï¼ˆå…¨æ–‡ï¼‰ â˜…â˜…â˜…
    const contentData = {
      privacy: `
        <h2>ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒãƒªã‚·ãƒ¼</h2>
        <p>æ ªå¼ä¼šç¤¾Niutinyï¼ˆä»¥ä¸‹ã€Œå½“ç¤¾ã€ã¨ã„ã„ã¾ã™ã€‚ï¼‰ã¯ã€å½“ç¤¾ãŒæœ¬ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆä¸Šã§æä¾›ã™ã‚‹å„ç¨®ã‚µãƒ¼ãƒ“ã‚¹ï¼ˆä»¥ä¸‹ã€Œæœ¬ã‚µãƒ¼ãƒ“ã‚¹ã€ã¨ã„ã„ã¾ã™ã€‚ï¼‰ã«ãŠã„ã¦å–å¾—ã™ã‚‹ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å€‹äººæƒ…å ±ã«ã¤ã„ã¦ã€ä»¥ä¸‹ã®ã¨ãŠã‚Šãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒãƒªã‚·ãƒ¼ï¼ˆä»¥ä¸‹ã€Œæœ¬ãƒãƒªã‚·ãƒ¼ã€ã¨ã„ã„ã¾ã™ã€‚ï¼‰ã‚’å®šã‚ã€é©åˆ‡ã«å–ã‚Šæ‰±ã„ã¾ã™ã€‚</p>
        <h3>ç¬¬1æ¡ï¼ˆå€‹äººæƒ…å ±ã®å®šç¾©ï¼‰</h3>
        <p>æœ¬ãƒãƒªã‚·ãƒ¼ã«ãŠã‘ã‚‹ã€Œå€‹äººæƒ…å ±ã€ã¨ã¯ã€å€‹äººæƒ…å ±ã®ä¿è­·ã«é–¢ã™ã‚‹æ³•å¾‹ï¼ˆå€‹äººæƒ…å ±ä¿è­·æ³•ï¼‰ã«å®šã‚ã‚‹ã€Œå€‹äººæƒ…å ±ã€ã‚’æŒ‡ã—ã€æ°åã€ç”Ÿå¹´æœˆæ—¥ã€ä½æ‰€ã€é›»è©±ç•ªå·ã€é€£çµ¡å…ˆãã®ä»–ã®è¨˜è¿°ç­‰ã«ã‚ˆã‚Šç‰¹å®šã®å€‹äººã‚’è­˜åˆ¥ã§ãã‚‹æƒ…å ±ã‚’ã„ã„ã¾ã™ã€‚<br>ã¾ãŸã€å®¹è²Œã€æŒ‡ç´‹ã€å£°ç´‹ç­‰ã®ãƒ‡ãƒ¼ã‚¿ã€å¥åº·ä¿é™ºè¨¼ã®ä¿é™ºè€…ç•ªå·ãã®ä»–ã®æƒ…å ±å˜ä½“ã§å€‹äººã‚’è­˜åˆ¥ã§ãã‚‹æƒ…å ±ï¼ˆå€‹äººè­˜åˆ¥ç¬¦å·ï¼‰ã‚‚ã“ã‚Œã«å«ã¾ã‚Œã¾ã™ã€‚</p>
        <h3>ç¬¬2æ¡ï¼ˆå€‹äººæƒ…å ±ã®å–å¾—æ–¹æ³•ï¼‰</h3>
        <p>å½“ç¤¾ã¯ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒæœ¬ã‚µãƒ¼ãƒ“ã‚¹ã®åˆ©ç”¨ç™»éŒ²ç­‰ã‚’è¡Œã†éš›ã«ã€ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ç­‰ã®å€‹äººæƒ…å ±ã®æä¾›ã‚’æ±‚ã‚ã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ã€‚</p>
        <h3>ç¬¬3æ¡ï¼ˆåˆ©ç”¨ç›®çš„ï¼‰</h3>
        <p>å½“ç¤¾ãŒå€‹äººæƒ…å ±ã‚’å–å¾—ãƒ»åˆ©ç”¨ã™ã‚‹ç›®çš„ã¯ã€æ¬¡ã®ã¨ãŠã‚Šã§ã™ã€‚</p>
        <ol><li>æœ¬ã‚µãƒ¼ãƒ“ã‚¹ã®æä¾›ãŠã‚ˆã³é‹å–¶ã®ãŸã‚</li><li>ãŠå•ã„åˆã‚ã›ã¸ã®å¯¾å¿œï¼ˆæœ¬äººç¢ºèªã‚’å«ã¿ã¾ã™ã€‚ï¼‰ã®ãŸã‚</li><li>ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒåˆ©ç”¨ä¸­ã®ã‚µãƒ¼ãƒ“ã‚¹ã«é–¢ã™ã‚‹æ–°æ©Ÿèƒ½ã€æ›´æ–°ã€ã‚­ãƒ£ãƒ³ãƒšãƒ¼ãƒ³ç­‰ã€ãªã‚‰ã³ã«å½“ç¤¾ãŒæä¾›ã™ã‚‹ä»–ã‚µãƒ¼ãƒ“ã‚¹ã®æ¡ˆå†…ã‚’ãƒ¡ãƒ¼ãƒ«ç­‰ã§é€ä»˜ã™ã‚‹ãŸã‚</li><li>ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹æƒ…å ±ã‚„é‡è¦ãªãŠçŸ¥ã‚‰ã›ç­‰ã€å¿…è¦ãªé€£çµ¡ã‚’è¡Œã†ãŸã‚</li><li>åˆ©ç”¨è¦ç´„ã«é•åã™ã‚‹ãƒ¦ãƒ¼ã‚¶ãƒ¼ã€ã¾ãŸã¯ä¸æ­£ãƒ»ä¸å½“ãªç›®çš„ã§åˆ©ç”¨ã—ã‚ˆã†ã¨ã™ã‚‹ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’ç‰¹å®šã—ã€åˆ©ç”¨ã‚’ãŠæ–­ã‚Šã™ã‚‹ãŸã‚</li><li>ç™»éŒ²æƒ…å ±ã®é–²è¦§ãƒ»å¤‰æ›´ãƒ»å‰Šé™¤ãŠã‚ˆã³åˆ©ç”¨çŠ¶æ³ã®ç¢ºèªç­‰ã‚’è¡Œã£ã¦ã„ãŸã ããŸã‚</li><li>ä¸Šè¨˜å„ç›®çš„ã«ä»˜éšã™ã‚‹ç›®çš„ã®ãŸã‚</li></ol>
        <h3>ç¬¬4æ¡ï¼ˆåˆ©ç”¨ç›®çš„ã®å¤‰æ›´ï¼‰</h3>
        <ol><li>å½“ç¤¾ã¯ã€å¤‰æ›´å¾Œã®åˆ©ç”¨ç›®çš„ãŒå¤‰æ›´å‰ã®ç›®çš„ã¨é–¢é€£æ€§ã‚’æœ‰ã™ã‚‹ã¨åˆç†çš„ã«åˆ¤æ–­ã§ãã‚‹å ´åˆã«é™ã‚Šã€å€‹äººæƒ…å ±ã®åˆ©ç”¨ç›®çš„ã‚’å¤‰æ›´ã™ã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚</li><li>åˆ©ç”¨ç›®çš„ã‚’å¤‰æ›´ã—ãŸå ´åˆã€å½“ç¤¾æ‰€å®šã®æ–¹æ³•ã«ã‚ˆã‚Šãƒ¦ãƒ¼ã‚¶ãƒ¼ã¸é€šçŸ¥ã™ã‚‹ã€ã¾ãŸã¯æœ¬ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆä¸Šã§å…¬è¡¨ã—ã¾ã™ã€‚</li></ol>
        <h3>ç¬¬5æ¡ï¼ˆç¬¬ä¸‰è€…æä¾›ï¼‰</h3>
        <p>å½“ç¤¾ã¯ã€ã‚ã‚‰ã‹ã˜ã‚ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®åŒæ„ã‚’å¾—ã‚‹ã“ã¨ãªãç¬¬ä¸‰è€…ã«å€‹äººæƒ…å ±ã‚’æä¾›ã—ã¾ã›ã‚“ã€‚ãŸã ã—ã€å€‹äººæƒ…å ±ä¿è­·æ³•ãã®ä»–ã®æ³•ä»¤ã§èªã‚ã‚‰ã‚Œã‚‹å ´åˆã‚’é™¤ãã¾ã™ã€‚</p>
        <h3>ç¬¬10æ¡ï¼ˆãŠå•ã„åˆã‚ã›çª“å£ï¼‰</h3>
        <p>æœ¬ãƒãƒªã‚·ãƒ¼ã«é–¢ã™ã‚‹ã”è³ªå•ãƒ»ã”ç›¸è«‡ã¯ã€ä»¥ä¸‹ã¾ã§ã”é€£çµ¡ãã ã•ã„ã€‚<br>ç¤¾åï¼šæ ªå¼ä¼šç¤¾Niutiny<br>Eãƒ¡ãƒ¼ãƒ«ï¼štttcgforce [@] gmail.com</p>
      `,
      terms: `
        <h2>åˆ©ç”¨è¦ç´„</h2>
        <p>ã“ã®åˆ©ç”¨è¦ç´„ï¼ˆä»¥ä¸‹ã€Œæœ¬è¦ç´„ã€ã¨ã„ã„ã¾ã™ã€‚ï¼‰ã¯ã€æ ªå¼ä¼šç¤¾Niutinyï¼ˆä»¥ä¸‹ã€Œå½“ç¤¾ã€ã¨ã„ã„ã¾ã™ã€‚ï¼‰ãŒé‹å–¶ã™ã‚‹ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆãŠã‚ˆã³å®Ÿåº—èˆ—ç­‰ã‚’é€šã˜ã¦æä¾›ã™ã‚‹ã‚µãƒ¼ãƒ“ã‚¹ï¼ˆä»¥ä¸‹ã€Œæœ¬ã‚µãƒ¼ãƒ“ã‚¹ã€ã¨ã„ã„ã¾ã™ã€‚ï¼‰ã®åˆ©ç”¨æ¡ä»¶ã‚’å®šã‚ã‚‹ã‚‚ã®ã§ã™ã€‚ç™»éŒ²ãƒ¦ãƒ¼ã‚¶ãƒ¼ï¼ˆä»¥ä¸‹ã€Œãƒ¦ãƒ¼ã‚¶ãƒ¼ã€ã¨ã„ã„ã¾ã™ã€‚ï¼‰ã¯ã€æœ¬è¦ç´„ã«åŒæ„ã®ã†ãˆã€æœ¬ã‚µãƒ¼ãƒ“ã‚¹ã‚’åˆ©ç”¨ã™ã‚‹ã‚‚ã®ã¨ã—ã¾ã™ã€‚</p>
        <h3>ç¬¬1æ¡ï¼ˆé©ç”¨ï¼‰</h3>
        <p>æœ¬è¦ç´„ã¯ã€æœ¬ã‚µãƒ¼ãƒ“ã‚¹ã®åˆ©ç”¨ã«é–¢ã—ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¨å½“ç¤¾ã¨ã®é–“ã®ä¸€åˆ‡ã®é–¢ä¿‚ã«é©ç”¨ã•ã‚Œã¾ã™ã€‚</p>
        <h3>ç¬¬2æ¡ï¼ˆå®šç¾©ï¼‰</h3>
        <p>ã€Œæœ¬ã‚µãƒ¼ãƒ“ã‚¹ã€ã¨ã¯ã€å½“ç¤¾ãŒé‹å–¶ã™ã‚‹è²·å–ã‚µãƒ¼ãƒ“ã‚¹ç­‰ã®ç·ç§°ã‚’æŒ‡ã—ã¾ã™ã€‚</p>
        `,
      flow: `
        <h2>éƒµé€è²·å–ã®æµã‚Œ</h2>
        <div class="flow-step"><div class="flow-title">STEP 1ï½œå•†å“ã‚’ã‚«ãƒ¼ãƒˆã¸å…¥ã‚Œã¦ç”³ã—è¾¼ã¿</div><p>è²·å–ä¸€è¦§ã«ã‚ã‚‹å•†å“ã¯ã€ãã®ã¾ã¾ã‚«ãƒ¼ãƒˆã¸è¿½åŠ ã—ã¦ç”³è¾¼æ‰‹ç¶šãã‚’ã—ã¦ãã ã•ã„ã€‚<br>ä¸€è¦§ã«è¦‹å½“ãŸã‚‰ãªã„å•†å“ã¯ã€<strong>ã€Œã¾ã¨ã‚ã¦è²·å–ã€</strong>ã‚’ã‚«ãƒ¼ãƒˆã«å…¥ã‚Œã¦ãŠç”³ã—è¾¼ã¿ãã ã•ã„ã€‚</p></div>
        <div class="flow-step"><div class="flow-title">STEP 2ï½œå—ä»˜å®Œäº†ãƒ¡ãƒ¼ãƒ«ç¢ºèªå¾Œã«ç™ºé€</div><p>ãŠç”³ã—è¾¼ã¿å†…å®¹ã®ç¢ºèªãŒå®Œäº†ã™ã‚‹ã¨ã€å—ä»˜ï¼ˆæ‰¿èªï¼‰ãƒ¡ãƒ¼ãƒ«ã‚’ãŠé€ã‚Šã—ã¾ã™ã€‚<br>ãƒ¡ãƒ¼ãƒ«ã‚’ç¢ºèªã—ã¦ã‹ã‚‰å•†å“ã‚’ç™ºé€ã—ã¦ãã ã•ã„ã€‚</p></div>
        <div class="flow-step"><div class="flow-title">STEP 3ï½œæŸ»å®šçµæœã®ç¢ºèªãƒ»æ‰¿è«¾</div><p>å•†å“åˆ°ç€å¾Œã«æŸ»å®šã‚’è¡Œã„ã€çµæœã‚’å–å¼•ãƒšãƒ¼ã‚¸ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã§ã”æ¡ˆå†…ã—ã¾ã™ã€‚<br>å†…å®¹ã‚’ã”ç¢ºèªã®ã†ãˆã€å–å¼•ç”»é¢ã‹ã‚‰æ‰¿è«¾ï¼ã‚­ãƒ£ãƒ³ã‚»ãƒ«ã®ãŠæ‰‹ç¶šãã‚’è¡Œã£ã¦ãã ã•ã„ã€‚<br><small>â€»ã™ã¹ã¦æº€é¡æŸ»å®šã®å ´åˆã¯ã€æ‰¿è«¾æ“ä½œãŒä¸è¦ã¨ãªã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ã€‚</small></p></div>
        <hr style="border-color:#444; margin:30px 0;">
        <h3>ã‚ˆãã‚ã‚‹è³ªå•ï¼ˆFAQï¼‰</h3>
        <div class="faq-item"><div class="faq-q">Q. æŸ»å®šã¨å…¥é‡‘ã¾ã§ã©ã‚Œãã‚‰ã„ï¼Ÿ</div><div class="faq-a">A. å•†å“åˆ°ç€å¾Œã€åŸå‰‡ã¨ã—ã¦å½“æ—¥ä¸­ã«æŸ»å®šã¨æŒ¯è¾¼å‡¦ç†ã‚’è¡Œã„ã¾ã™ã€‚</div></div>
        <div class="faq-item"><div class="faq-q">Q. é€æ–™ã¯å¿…è¦ï¼Ÿ</div><div class="faq-a">A. ç™ºé€æ™‚ã®é€æ–™ã¯ãŠå®¢æ§˜è² æ‹…ã¨ãªã‚Šã¾ã™ã€‚</div></div>
        <div class="faq-item"><div class="faq-q">Q. ç”³è¾¼æ›¸ã‚„èº«åˆ†è¨¼ã®å°åˆ·ãƒ»åŒæ¢±ã¯å¿…è¦ï¼Ÿ</div><div class="faq-a">A. ä¸è¦ã§ã™ã€‚æ¡ˆå†…ã«æ²¿ã£ã¦ã€èº«åˆ†è¨¼ã¯ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã§æå‡ºã§ãã¾ã™ã€‚</div></div>
        <div class="note-box"><div class="note-title">ã”åˆ©ç”¨å‰ã®æ³¨æ„äº‹é …</div><p><strong>ç™ºé€æœŸé™ã¨ä¾¡æ ¼ã®å–ã‚Šæ‰±ã„</strong><br>â€¢ æ‰¿èªï¼ˆå—ä»˜ï¼‰é€£çµ¡ãŒ19:00ä»¥å‰ï¼šå½“æ—¥ç™ºé€ã€œç¿Œæ—¥åˆ°ç€ã¾ã§ã€ç”³è¾¼æ™‚ã®ä¾¡æ ¼ã‚’åŸºæº–ã«å¯¾å¿œ<br>â€¢ æ‰¿èªï¼ˆå—ä»˜ï¼‰é€£çµ¡ãŒ19:00ä»¥é™ï¼šç¿Œæ—¥ç™ºé€ã€œç¿Œã€…æ—¥åˆ°ç€ã¾ã§ã€ç”³è¾¼æ™‚ã®ä¾¡æ ¼ã‚’åŸºæº–ã«å¯¾å¿œ<br>â€¢ é æ–¹åœ°åŸŸãªã©ã§åˆ°ç€ã«2æ—¥ä»¥ä¸Šã‹ã‹ã‚‹å ´åˆã¯ã€ã•ã‚‰ã«+1æ—¥ã‚’ç›®å®‰ã«å–ã‚Šæ‰±ã„ã¾ã™</p></div>
      `
    };

    function openInfo(t) {
      el("mainView").style.display="none"; el("cartView").style.display="none"; el("infoView").style.display="block";
      el("infoContent").innerHTML = contentData[t];
      if(drawer.classList.contains("open")) toggleDrawer();
      window.scrollTo(0,0);
    }
    function closeInfo() {
      el("infoView").style.display="none"; el("mainView").style.display="block"; window.scrollTo(0,0);
    }

    // ãƒ¢ãƒ¼ãƒ€ãƒ«
    const modal = el("modal");
    const closeModalBtn = el("closeModalBtn");
    el("grid").addEventListener("click", (e) => {
      if(e.target.closest(".cart-actions")) return;
      const card = e.target.closest(".card");
      if (card) {
        const item = CURRENT_ITEMS[card.dataset.index];
        if (item) openModal(item);
      }
    });
    function openModal(item) {
      el("modalImg").style.display = item.imageUrl ? "inline-block" : "none";
      if(item.imageUrl) el("modalImg").src = item.imageUrl;
      el("modalTitle").textContent = item.name;
      el("modalPrice").textContent = yen(item.price);
      el("modalLimit").textContent = "æ®‹ã‚Š: " + item.remaining;
      el("modalTags").innerHTML = `<span class="type-label">ã€${item.type}ã€‘</span>`;
      modal.classList.add("active");
    }
    closeModalBtn.onclick = () => modal.classList.remove("active");
    modal.onclick = (e) => { if(e.target === modal) modal.classList.remove("active"); };

    // åˆæœŸåŒ–
    updateModeUI(); loadData();
  </script>
</body>
</html>
